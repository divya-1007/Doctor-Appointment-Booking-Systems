
<!DOCTYPE html>
    <html lang="en">

    <head>
       {{>head}}
    </head>

    <body>
        <!-- Loader -->
        {{!-- <div id="preloader">
            <div id="status">
                <div class="spinner">
                    <div class="double-bounce1"></div>
                    <div class="double-bounce2"></div>
                </div>
            </div>
        </div> --}}
        <!-- Loader -->
        
        <div class="back-to-home rounded d-none d-sm-block">
            <a href="/" class="btn btn-icon btn-primary"><i data-feather="home" class="icons"></i></a>
        </div>

        <!-- Hero Start -->
        <section class="bg-home d-flex bg-light align-items-center" style="background: url('../assets/images/bg/bg-lines-one.png') center;">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-5 col-md-8">
                        <img src="../assets/images/logo-dark.png" height="24" class="mx-auto d-block" alt="">
                        <div class="card login-page bg-white shadow mt-4 rounded border-0">
                            <div class="card-body">
                                <div id="form-response">

                                 </div>
                                 <div id="form-response-data">

                                 </div>
                                <h4 class="text-center">Sign In</h4>  
                                {{#if success}}
                              <div class="alert alert-success">{{message}}</div>
                                  {{/if}}
                                <form action="/api/signin" method="post" class="login-form mt-4" id="SignIn">
                                    <div class="row">
                                        {{#if error_data}}
                                        <div class="has_error">{{error_data}}</div>
                                        {{/if}}
                                        {{#if error_email}}
                                        <div class="has_error">{{error_email}}</div>
                                        {{/if}}

                                        <div class="col-lg-12">
                                            <div class="mb-3">
                                                <label class="form-label">Your Email <span class="text-danger">*</span></label>
                                                <input type="email" name="email" class="form-control" placeholder="Email" name="email" required="">
                                            </div>
                                        </div>

                                        <div class="col-lg-12">
                                            <div class="mb-3">
                                                <label class="form-label">Password <span class="text-danger">*</span></label>
                                                <input type="password" name="password" {{#if error_password}} value="{{password}}" {{/if}}
                                                class="form-control" placeholder="Your Password"  required="">
                                                {{#if error_password}}
                                               <div class="has_error">{{error_password}}</div>
                                               {{/if}}
                                            </div>
                                        </div>

                                        <div class="col-lg-12">
                                            <div class="d-flex justify-content-between">
                                                <div class="mb-3">
                                                    <div class="form-check">
                                                        <input class="form-check-input align-middle" type="checkbox" value="" id="remember-check">
                                                        <label class="form-check-label" for="remember-check">Remember me</label>
                                                    </div>
                                                </div>
                                                <a href="/forgot-password" class="text-dark h6 mb-0">Forgot password ?</a>
                                            </div>
                                        </div>
                                        <div class="col-lg-12 mb-0">
                                            <div class="d-grid">
                                                <button class="btn btn-primary" type="submit">Sign in</button>
                                            </div>
                                        </div>

                                        <div class="col-lg-12 mt-3 text-center">
                                            <h6 class="text-muted">Or</h6>
                                        </div><!--end col-->
                                        
                                        {{!-- <div class="col-6 mt-3">
                                            <div class="d-grid">
                                                <a href="/facebook" class="btn btn-soft-primary"><i class="uil uil-facebook"></i> Facebook</a>
                                            </div>
                                        </div><!--end col--> --}}
                                        
                                        <div class="col-12 mt-3">
                                            <div class="d-grid">
                                            <a href="#" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#appointmentform"><i class="uil uil-google"></i>Google</a>
                                            {{!-- <a href="#" class="btn btn-soft-primary"  data-bs-toggle="modal" data-bs-target="#viewappointment"><i class="uil uil-google"></i>Google</a> --}}
                                                {{!-- <a href="/google" class="btn btn-soft-primary"><i class="uil uil-googleuil uil-google"></i> Google</a> --}}
                                            
                                            </div>
                                        </div><!--end col-->

                                        <div class="col-12 text-center">
                                            <p class="mb-0 mt-3"><small class="text-dark me-2">Don't have an account ?</small> <a href="/SignUp" class="text-dark fw-bold">Sign Up</a></p>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div><!---->
                    </div> <!--end col-->
                </div><!--end row-->
            </div> <!--end container-->
        </section><!--end section-->
        <!-- Hero End -->
        <div class="modal fade" id="appointmentform" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-bottom p-3">
                    
                    <h5 class="modal-title" id="exampleModalLabel">Select Your Role</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-3 pt-4">
                      <form action="/api/role" method="POST" id="googlelogin">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Role</label>
                                        <select required="true" name="role" class="form-control doctor-name select2input">
                                             <option value="doctor">Doctor</option>
                                             <option value="patient">Patient</option>
                                        </select>
                                    </div>
                                </div><!--end col-->

                                <div class="col-lg-12">
                                    <div class="d-grid">
                                        <button type="submit" class="btn btn-primary">Submit</button>
                                    </div>
                                </div><!--end col-->
                            </div><!--end row-->
                        </form>
                    </div>
            </div>
        </div>
    </div>

        <!-- javascript -->
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
        {{>javascript}}
        <script>
         $(document).ready(function () {
             //Common form request
            $("#SignIn").submit(function (e) {
            
        e.preventDefault();
        var fromData = $(this).serialize();
        
         $.ajax({
            type: 'POST',
            url:$(this).attr('action'),
            data:fromData,
            success: function (response) {
                console.log(response)
                if(response.status ==200){ 
                swal({
                        title:`Welcome TO Doctor Appointment Booking System.......✔️`,
                        text: response.message,
                        type: "success"
                    }).then(function() {
                       if (response.role == "doctor") {
                        window.location.href = '/dashboard'
                    }else if(response.role == "admin"){
                        window.location.href = '/admin'
                    }else if (response.role == "patient") {
                        window.location.href = '/patientDashboard' 
                    }
                    });
                }else{
                    swal('Oops...',
                        response.message,
                        'error'
                        );
                }
            }
         })
        })

//update status
    $("#googlelogin").submit(function (e) {
            
        e.preventDefault();
        var fromData = $(this).serialize();
        
         $.ajax({
            type: 'POST',
            url:$(this).attr('action'),
            data:fromData,
            success: function (response) {
                //console.log(response)
                if(response.status == 200){ 
                 setTimeout(() => {
                $("#form-response-data").html('<div  class="alert alert-success" role="alert">'+response.message+'</div>'); 
                }, 1000);
                
               window.location.href = '/google'
                }else{
                   $("#form-response-data").html('<div  class="alert alert-success" role="alert">'+response.message+'</div>');   
                }
            }
         })
        })
            
            });

        </script>
        
    </body>

</html>